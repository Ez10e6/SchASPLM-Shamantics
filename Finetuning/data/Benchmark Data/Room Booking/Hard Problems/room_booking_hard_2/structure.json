{
  "instance_template": "workshop(1..12). topic(\"AI\"; \"Physics\"; \"Math\"; \"Linguistics\"). day(1..3). slot(\"morning\"; \"midday\"; \"evening\"). room(1..4). slotOrder(\"morning\", 1). slotOrder(\"midday\", 2). slotOrder(\"evening\", 3). adjacent(\"morning\", \"midday\"). adjacent(\"midday\", \"evening\").",
  "generator": "{ topicOf(W, T) : topic(T) } = 1 :- workshop(W). { scheduled(W, R, S, D) : room(R), slot(S), day(D) } :- workshop(W).",
  "hard_constraints": [
    {
      "description": "sanity check: make sure every single workshop is on the calendar somewhere.",
      "asp_rule": ":- workshop(W), not scheduled(W, _, _, _)."
    },
    {
      "description": "no double-booking rooms. just one workshop per room per slot.",
      "asp_rule": ":- scheduled(W1, R, S, D), scheduled(W2, R, S, D), W1 != W2."
    },
    {
      "description": "don't burn out the rooms. max two sessions per day per room.",
      "asp_rule": ":- #count{ S,W : scheduled(W, R, S, D) } > 2, room(R), day(D)."
    },
    {
      "description": "rooms need a breather. no back-to-back sessions in the same room.",
      "asp_rule": ":- scheduled(_, R, S1, D), scheduled(_, R, S2, D), adjacent(S1, S2)."
    },
    {
      "description": "room 2 is off-limits in the evening.",
      "asp_rule": ":- scheduled(_, 2, \"evening\", _)."
    },
    {
      "description": "room 4 is too small for the AI and Physics crowds.",
      "asp_rule": ":- scheduled(W, 4, _, _), topicOf(W, \"AI\").\n:- scheduled(W, 4, _, _), topicOf(W, \"Physics\")."
    },
    {
      "description": "AI folks are early birds. morning sessions only.",
      "asp_rule": ":- scheduled(W, _, S, _), topicOf(W, \"AI\"), S != \"morning\"."
    },
    {
      "description": "physics is done by day 3. keep it to the first two days.",
      "asp_rule": ":- scheduled(W, R, S, 3), topicOf(W, \"Physics\")."
    },
    {
      "description": "math belongs in rooms 1 or 3.",
      "asp_rule": ":- scheduled(W, R, _, _), topicOf(W, \"Math\"), R != 1, R != 3."
    },
    {
      "description": "linguistics doesn't share well. no two linguistics talks at the same time.",
      "asp_rule": ":- 2 { scheduled(W, R, S, D) : topicOf(W, \"Linguistics\"), room(R) }, slot(S), day(D)."
    },
    {
      "description": "keep the vibe consistent. only one discipline per room per day.",
      "asp_rule": ":- scheduled(W1, R, S1, D), scheduled(W2, R, S2, D), topicOf(W1, T1), topicOf(W2, T2), T1 != T2."
    },
    {
      "description": "we need variety. every topic needs to show up at least once every day.",
      "asp_rule": ":- day(D), topic(T), not scheduled(_, _, _, D) : topicOf(_, T)."
    },
    {
      "description": "kick things off with AI. any workshop in the very first slot used must be AI.",
      "asp_rule": "timeVal(W, I) :- scheduled(W, _, S, D), slotOrder(S, O), I = (D-1)*3 + O. minVal(M) :- M = #min { I : timeVal(_, I) }. :- timeVal(W, I), minVal(I), not topicOf(W, \"AI\")."
    },
    {
      "description": "wrap it up with linguistics. the last workshop scheduled has to be from that field.",
      "asp_rule": "maxVal(M) :- M = #max { I : timeVal(_, I) }. :- timeVal(W, I), maxVal(I), not topicOf(W, \"Linguistics\")."
    }
  ],
  "soft_constraints": [
    {
      "description": "try to keep the rooms busy. mark every empty slot as a penalty.",
      "asp_rule": "penalty(\"idle_slot\", (R, S, D), 1) :- room(R), slot(S), day(D), not scheduled(_, R, S, D)."
    }
  ],
  "global_objective": "#minimize { Cost,Name,Args : penalty(Name, Args, Cost) }."
}