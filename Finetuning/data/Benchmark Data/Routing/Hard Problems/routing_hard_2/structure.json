{
  "instance_template": "loc(\"LaunchPad\"; \"Tunnel1\"; \"Tunnel2\"; \"StationA\"; \"StationB\"; \"Tunnel3\"; \"CalibEdge\"; \"StationC\").\nedge(\"LaunchPad\",\"Tunnel1\",2).\nedge(\"LaunchPad\",\"Tunnel2\",3).\nedge(\"Tunnel1\",\"StationA\",1).\nedge(\"StationA\",\"Tunnel3\",1).\nedge(\"Tunnel3\",\"Tunnel2\",1).\nedge(\"Tunnel2\",\"StationB\",1).\nedge(\"Tunnel2\",\"CalibEdge\",2).\nedge(\"CalibEdge\",\"StationC\",1).\nedge(\"StationC\",\"Tunnel1\",2).\ntime(0..10).",
  "generator": "1 { at(L, T) : loc(L) } 1 :- time(T).\n{ sampled(L, T) : loc(L), time(T) }.\n{ refill(T) : at(\"CalibEdge\", T), time(T), T < 9 }.",
  "hard_constraints": [
    {
      "description": "Business Requirements: Rover must start at the LaunchPad at time 0.",
      "asp_rule": ":- at(L, 0), L != \"LaunchPad\"."
    },
    {
      "description": "Business Requirements: Movements between locations must follow the designated tunnel network and directed edges.",
      "asp_rule": ":- at(L1, T), at(L2, T+1), L1 != L2, not edge(L1, L2, _), time(T), T < 10."
    },
    {
      "description": "Business Requirements: Sampling operations require the rover to remain stationary for exactly one minute.",
      "asp_rule": ":- sampled(L, T), not at(L, T).\n:- sampled(L, T), not at(L, T+1)."
    },
    {
      "description": "Business Requirements: Mandatory samples at StationA and StationB must be collected exactly once.",
      "asp_rule": "1 { sampled(L, T) : time(T) } 1 :- L = (\"StationA\"; \"StationB\")."
    },
    {
      "description": "Business Requirements: Collection at StationA must be completed no later than minute 6.",
      "asp_rule": "finish_time(L, T+1) :- sampled(L, T).\n:- finish_time(\"StationA\", T), T > 6."
    },
    {
      "description": "Business Requirements: StationC must be sampled if and only if both primary stations are sampled by minute 8.",
      "asp_rule": "max_mandatory_finish(M) :- M = #max { T : finish_time(\"StationA\", T); T : finish_time(\"StationB\", T) }.\nmand_ready :- max_mandatory_finish(M), M <= 8.\nsampled_c :- sampled(\"StationC\", _).\n:- mand_ready, not sampled_c.\n:- not mand_ready, sampled_c."
    },
    {
      "description": "Business Requirements: To avoid contamination, no two consecutive samples can be taken at the same station.",
      "asp_rule": ":- sampled(L, T), sampled(L, T+1)."
    },
    {
      "description": "Business Requirements: A water refill at CalibEdge requires two consecutive stationary minutes and is limited to one use.",
      "asp_rule": ":- refill(T), not at(\"CalibEdge\", T).\n:- refill(T), not at(\"CalibEdge\", T+1).\n:- refill(T), not at(\"CalibEdge\", T+2).\n:- #count { T : refill(T) } > 1."
    },
    {
      "description": "Business Requirements: Track tank capacity constraints based on movements (consumption), sampling (recovery), and refills.",
      "asp_rule": "tank(0, 16).\ntank(T+1, W-C) :- tank(T, W), at(L1, T), at(L2, T+1), edge(L1, L2, C).\ntank(T+1, W+1) :- tank(T, W), sampled(L, T), W < 16.\ntank(T+1, 16) :- tank(T, 16), sampled(L, T).\ntank(T+1, W) :- tank(T, W), refill(T).\ntank(T+2, W+3) :- tank(T+1, W), refill(T), W <= 13.\ntank(T+2, 16) :- tank(T+1, W), refill(T), W > 13.\nrefill_active(T) :- refill(T-1), time(T), T > 0.\ntank(T+1, W) :- tank(T, W), at(L, T), at(L, T+1), not sampled(L, T), not refill(T), not refill_active(T), time(T), T < 10.\n:- tank(T, W), W < 0."
    },
    {
      "description": "Business Requirements: Total mission events (movements, samples, refills) must not exceed 18 to prevent rover wear.",
      "asp_rule": "move_e(T) :- at(L1, T-1), at(L2, T), L1 != L2, time(T).\nsample_e(T) :- sampled(L, T), time(T).\nrefill_e(T) :- refill(T), time(T).\ntotal_events(N) :- N = #count { T, 1 : move_e(T); T, 2 : sample_e(T); T, 3 : refill_e(T) }.\n:- total_events(N), N > 18."
    }
  ],
  "soft_constraints": [
    {
      "description": "Business Requirements: The primary mission objective is to maximize the total number of samples collected.",
      "asp_rule": "penalty(\"TotalSamples\", (L, T), -1) :- sampled(L, T)."
    },
    {
      "description": "Business Requirements: As a secondary objective, minimize the time taken to complete mandatory sampling operations.",
      "asp_rule": "penalty(\"MandatoryTime\", 1, M) :- max_mandatory_finish(M)."
    }
  ],
  "global_objective": "#minimize { Cost@2, Name, ID : penalty(Name, ID, Cost), Name == \"TotalSamples\" ; Cost@1, Name, ID : penalty(Name, ID, Cost), Name == \"MandatoryTime\" }."
}