% There are 8 graduate workshops.
workshop(1..8).

% Workshops are in AI, Math, or Bio.
topic("AI"; "Math"; "Bio").
1 {topicOf(W, T) : topic(T)} 1 :- workshop(W).

% There are 2 days, with 3 time slots per day: morning, midday, and afternoon.
day(1..2).
slot("morning"; "midday"; "afternoon").

% There are 3 rooms.
room(1..3).

% Each workshop must be scheduled.
1 {scheduled(W, R, S, D) : room(R), slot(S), day(D)} :- workshop(W).

% Only one workshop can be in a room at a time.
:- scheduled(W1, R, S, D), scheduled(W2, R, S, D), W1 != W2.

% Each room can be used at most twice per day.
{scheduled(W, R, S, D) : workshop(W), slot(S)} 2 :- room(R), day(D).

% Room 2 is not available in the afternoon.
:- scheduled(_, 2, "afternoon", _).

% AI workshops must be in the morning.
:- scheduled(W, _, S, _), topicOf(W, "AI"), S != "morning".

% No two Math workshops can be scheduled at the same time.
:- scheduled(W1, _, S, D), scheduled(W2, _, S, D), topicOf(W1, "Math"), topicOf(W2, "Math"), W1 != W2.

% Bio and AI cannot be in the same room on the same day.
:- scheduled(W1, R, _, D), scheduled(W2, R, _, D), topicOf(W1, "Bio"), topicOf(W2, "AI").

% At least one workshop of each topic must be held on each day.
:- day(D), topic(T), not scheduled(W, _, _, D) : topicOf(W, T).

% Try to minimize idle room slots.
used(R, S, D) :- scheduled(_, R, S, D).
idle(R, S, D) :- room(R), slot(S), day(D), not used(R, S, D).
#minimize {1, R, S, D : idle(R, S, D)}.
